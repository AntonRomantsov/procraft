{{ header }}
<div class="container">
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul>
  {% if (error_warning) %}
  <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}</div>
  {% endif %}
  <div class="row">{{ column_left }}
    <div id="content" class="col-sm-12">
      <h1>{{ heading_title }}</h1>
      <p>{{ text_your_details }}</p>
      <div id="google-login-userdetails">
            <form method="POST" action="{{ submit_url }}" class="form-horizontal">
              <fieldset id="user_details">
                <legend>{{ additional_information }}</legend>

                <div class="form-group required" style="display: {{ ((customer_groups|length > 1 ) ? 'block'  : 'none') }};">
                  <label class="col-sm-2 control-label">{{ entry_customer_group }}</label>
                  <div class="col-sm-10">
                    {% for customer_group in customer_groups %}
                    {% if (customer_group.customer_group_id == customer_group_id) %}
                    <div class="radio">
                      <label>
                        <input type="radio" name="customer_group_id" value="{{ customer_group.customer_group_id }}" checked="checked" />
                        {{ customer_group.name }}</label>
                    </div>
                    {% else %}
                    <div class="radio">
                      <label>
                        <input type="radio" name="customer_group_id" value="{{ customer_group.customer_group_id }}" />
                        {{ customer_group.name }}</label>
                    </div>
                    {% endif %}
                    {% endfor %}
                  </div>
                </div>

                {% if (customer_groups|length < 1) %}
                    <div>
                        <input type="hidden" name="customer_group_id" value="{{ customer_group_id }}"/>
                    </div>
                {% endif %}
                                
                {% if (enabled.telephone) %}
                <div class="form-group required">
                  <label class="col-sm-2 control-label" for="input-telephone">{{ entry_telephone }}</label>
                  <div class="col-sm-10">
                    <input type="tel" name="telephone" value="{{ telephone }}" placeholder="{{ entry_telephone }}" id="input-telephone" class="form-control" />
                    {% if (error_telephone) %}
                    <div class="text-danger">{{ error_telephone }}</div>
                    {% endif %}
                  </div>
                </div>
                {% endif %}
                
                {% if (enabled.fax) %}
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-fax">{{ entry_fax }}</label>
                  <div class="col-sm-10">
                    <input type="text" name="fax" value="{{ fax }}" placeholder="{{ entry_fax }}" id="input-fax" class="form-control" />
                  </div>
                </div>
                {% endif %}
                
                {% if (enabled.company) %}
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-company">{{ entry_company }}</label>
                  <div class="col-sm-10">
                    <input type="text" name="company" value="{{ company }}" placeholder="{{ entry_company }}" id="input-company" class="form-control" />
                  </div>
                </div>
                {% endif %}
                
                {% if (enabled.address) %}
                <div class="form-group required">
                  <label class="col-sm-2 control-label" for="input-address-1">{{ entry_address_1 }}</label>
                  <div class="col-sm-10">
                    <input type="text" name="address_1" value="{{ address_1 }}" placeholder="{{ entry_address_1 }}" id="input-address-1" class="form-control" />
                    {% if (error_address_1) %}
                    <div class="text-danger">{{ error_address_1 }}</div>
                    {% endif %}
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-address-2">{{ entry_address_2 }}</label>
                  <div class="col-sm-10">
                    <input type="text" name="address_2" value="{{ address_2 }}" placeholder="{{ entry_address_2 }}" id="input-address-2" class="form-control" />
                  </div>
                </div>
                {% endif %}
                
                {% if (enabled.country) %}
                <div class="form-group required">
                  <label class="col-sm-2 control-label" for="input-country">{{ entry_country }}</label>
                  <div class="col-sm-10">
                    <select name="country_id" id="input-country" class="form-control">
                      <option value="">{{ text_select }}</option>
                      {% for country in countries %}
                      {% if (country.country_id == country_id) %}
                      <option value="{{ country.country_id }}" selected="selected">{{ country.name }}</option>
                      {% else %}
                      <option value="{{ country.country_id }}">{{ country.name }}</option>
                      {% endif %}
                      {% endfor %}
                    </select>
                    {% if (error_country) %}
                    <div class="text-danger">{{ error_country }}</div>
                    {% endif %}
                  </div>
                </div>
                {% else %}
                <div>
                    <input type="hidden" value="{{ country_id }}" name="country_id" />
                </div>
                {% endif %}
                
                {% if (enabled.region) %}
                <div class="form-group required">
                  <label class="col-sm-2 control-label" for="input-zone">{{ entry_zone }}</label>
                  <div class="col-sm-10">
                    <select name="zone_id" id="input-zone" class="form-control">
                    </select>
                    {% if (error_zone) %}
                    <div class="text-danger">{{ error_zone }}</div>
                    {% endif %}
                  </div>
                </div>
                {% endif %}
                
                {% if (enabled.postcode) %}
                <div class="form-group required">
                  <label class="col-sm-2 control-label" for="input-postcode">{{ entry_postcode }}</label>
                  <div class="col-sm-10">
                    <input type="text" name="postcode" value="{{ postcode }}" placeholder="{{ entry_postcode }}" id="input-postcode" class="form-control" />
                    {% if (error_postcode) %}
                    <div class="text-danger">{{ error_postcode }}</div>
                    {% endif %}
                  </div>
                </div>
                {% endif %}
                
                {% if (enabled.city) %}
                <div class="form-group required">
                  <label class="col-sm-2 control-label" for="input-city">{{ entry_city }}</label>
                  <div class="col-sm-10">
                    <input type="text" name="city" value="{{ city }}" placeholder="{{ entry_city }}" id="input-city" class="form-control" />
                    {% if (error_city) %}
                    <div class="text-danger">{{ error_city }}</div>
                    {% endif %}
                  </div>
                </div>
                {% endif %}

                {% for custom_field in custom_fields %}
                  {% if (custom_field.location == 'account') %}
                  {% if (custom_field.required == true) %}
                  {% if (custom_field.type == 'select') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <select name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control">
                        <option value="">{{ text_select }}</option>
                        {% for custom_field_value in custom_field.custom_field_value %}
                        {% if (register_custom_field[custom_field.custom_field_id] is defined and custom_field_value.custom_field_value_id == register_custom_field[custom_field.custom_field_id]) %}
                        <option value="{{ custom_field_value.custom_field_value_id }}" selected="selected">{{ custom_field_value.name }}</option>
                        {% else %}
                        <option value="{{ custom_field_value.custom_field_value_id }}">{{ custom_field_value.name }}</option>
                        {% endif %}
                        {% endfor %}
                      </select>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'radio') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div>
                        {% for custom_field_value in custom_field.custom_field_value %}
                        <div class="radio">
                          {% if (register_custom_field[custom_field.custom_field_id] is defined and custom_field_value.custom_field_value_id == register_custom_field[custom_field.custom_field_id]) %}
                          <label>
                            <input type="radio" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" checked="checked" />
                            {{ custom_field_value.name }}</label>
                          {% else %}
                          <label>
                            <input type="radio" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" />
                            {{ custom_field_value.name }}</label>
                          {% endif %}
                        </div>
                        {% endfor %}
                      </div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'checkbox') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div>
                        {% for custom_field_value in custom_field.custom_field_value %}
                        <div class="checkbox">
                          {% if (register_custom_field[custom_field.custom_field_id] is defined and custom_field_value.custom_field_value_id in register_custom_field[custom_field.custom_field_id]) %}
                          <label>
                            <input type="checkbox" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" checked="checked" />
                            {{ custom_field_value.name }}</label>
                          {% else %}
                          <label>
                            <input type="checkbox" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" />
                            {{ custom_field_value.name }}</label>
                          {% endif %}
                        </div>
                        {% endfor %}
                      </div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'text') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'textarea') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <textarea name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" rows="5" placeholder="{{ custom_field.name }}" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control">{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}</textarea>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'file') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <button type="button" id="button-custom-field{{ custom_field.custom_field_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default"><i class="fa fa-upload"></i> {{ button_upload }}</button>
                      <input type="hidden" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : '') }}" />
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'date') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div class="input-group date">
                        <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'time') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div class="input-group time">
                        <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" data-date-format="HH:mm" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'datetime') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field required" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div class="input-group datetime">
                        <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD HH:mm" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% endif %}
                  {% endif %}
                  {% endfor %}{# foreach above the triple if #}
                
              <fieldset id="address">
                  {% for custom_field in custom_fields %}
                  {% if (custom_field.location == 'address') %}
                  {% if (custom_field.type == 'select') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <select name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control">
                        <option value="">{{ text_select }}</option>
                        {% for custom_field_value in custom_field.custom_field_value %}
                        {% if (register_custom_field[custom_field.custom_field_id] is defined and custom_field_value.custom_field_value_id == register_custom_field[custom_field.custom_field_id]) %}
                        <option value="{{ custom_field_value.custom_field_value_id }}" selected="selected">{{ custom_field_value.name }}</option>
                        {% else %}
                        <option value="{{ custom_field_value.custom_field_value_id }}">{{ custom_field_value.name }}</option>
                        {% endif %}
                        {% endfor %}
                      </select>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'radio') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div>
                        {% for custom_field_value in custom_field.custom_field_value %}
                        <div class="radio">
                          {% if (register_custom_field[custom_field.custom_field_id] is defined and custom_field_value.custom_field_value_id == register_custom_field[custom_field.custom_field_id]) %}
                          <label>
                            <input type="radio" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" checked="checked" />
                            {{ custom_field_value.name }}</label>
                          {% else %}
                          <label>
                            <input type="radio" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ custom_field_value.custom_field_value_id }}" />
                            {{ custom_field_value.name }}</label>
                          {% endif %}
                        </div>
                        {% endfor %}
                      </div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'checkbox') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div>
                        {% for custom_field_value in custom_field.custom_field_value %}
                        <div class="checkbox">
                          {% if (register_custom_field[custom_field.custom_field_id] is defined and custom_field_value.custom_field_value_id in register_custom_field[custom_field.custom_field_id]) %}
                          <label>
                            <input type="checkbox" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" checked="checked" />
                            {{ custom_field_value.name }}</label>
                          {% else %}
                          <label>
                            <input type="checkbox" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}][]" value="{{ custom_field_value.custom_field_value_id }}" />
                            {{ custom_field_value.name }}</label>
                          {% endif %}
                        </div>
                        {% endfor %}
                      </div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'text') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'textarea') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <textarea name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" rows="5" placeholder="{{ custom_field.name }}" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control">{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}</textarea>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'file') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <button type="button" id="button-custom-field{{ custom_field.custom_field_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default"><i class="fa fa-upload"></i> {{ button_upload }}</button>
                      <input type="hidden" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : '') }}" />
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'date') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div class="input-group date">
                        <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'time') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div class="input-group time">
                        <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" data-date-format="HH:mm" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if (custom_field.type == 'datetime') %}
                  <div id="custom-field{{ custom_field.custom_field_id }}" class="form-group custom-field" data-sort="{{ custom_field.sort_order }}">
                    <label class="col-sm-2 control-label" for="input-custom-field{{ custom_field.custom_field_id }}">{{ custom_field.name }}</label>
                    <div class="col-sm-10">
                      <div class="input-group datetime">
                        <input type="text" name="custom_field[{{ custom_field.location }}][{{ custom_field.custom_field_id }}]" value="{{ ((register_custom_field[custom_field.custom_field_id] is defined ) ? register_custom_field[custom_field.custom_field_id]  : custom_field.value) }}" placeholder="{{ custom_field.name }}" data-date-format="YYYY-MM-DD HH:mm" id="input-custom-field{{ custom_field.custom_field_id }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                      {% if (error_custom_field[custom_field.custom_field_id] is defined) %}
                      <div class="text-danger">{{ error_custom_field[custom_field.custom_field_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% endif %}
                  {% endfor %}                  
                </fieldset>
                
                {% if (enabled.newsletter) %}
                <fieldset>
                  <legend>{{ text_newsletter }}</legend>
                  <div class="form-group">
                    <label class="col-sm-2 control-label">{{ entry_newsletter }}</label>
                    <div class="col-sm-10">
                      {% if (newsletter) %}
                      <label class="radio-inline">
                        <input type="radio" name="newsletter" value="1" checked="checked" />
                        {{ text_yes }}</label>
                      <label class="radio-inline">
                        <input type="radio" name="newsletter" value="0" />
                        {{ text_no }}</label>
                      {% else %}
                      <label class="radio-inline">
                        <input type="radio" name="newsletter" value="1" />
                        {{ text_yes }}</label>
                      <label class="radio-inline">
                        <input type="radio" name="newsletter" value="0" checked="checked" />
                        {{ text_no }}</label>
                      {% endif %}
                    </div>
                  </div>                  
                </fieldset>
                {% endif %}
                
                {% if (enabled.privacy) %}
                <div class="buttons">
                  <div class="pull-right">{{ text_agree }}
                    {% if (agree) %}
                    <input type="checkbox" name="agree" value="1" checked="checked" />
                    {% else %}
                    <input type="checkbox" name="agree" value="1" />
                    {% endif %}
                    &nbsp;
                    <input type="submit" value="{{ button_submit }}" class="btn btn-primary" />
                  </div>
                </div>
                {% else %}
                <div class="buttons">
                  <div class="pull-right">
                    <input type="submit" value="{{ button_submit }}" class="btn btn-primary" />
                  </div>
                </div>
                {% endif %}
              </fieldset>
            </form>
        </div>
     </div>
    </div>
</div>
<script type="text/javascript"><!--
    // redirect to a new tab of the parent location
    if(window.opener) {
        window.opener.parent.location = location;
        window.close();
    }

    $(document).ready(function() {
        var triggerZoneField = function(value) {
            $.ajax({
                url: 'index.php?route=extension/account/googlelogin/country&country_id=' + value,
                dataType: 'json',
                beforeSend: function() {
                    if ($('#google-login-userdetails select[name=\'country_id\']').length > 0) {
                        $('#google-login-userdetails select[name=\'country_id\']').after('<span class="wait">&nbsp;<i class="fa fa-spinner fa-spin"></i></span>');
                    }
                    {% if (enabled.region) %}
                        $('#google-login-userdetails select[name=\'zone_id\']').parent().slideUp(100);
                    {% endif %}
                },
                complete: function() {
                    $('.wait').remove();
                    {% if (enabled.region) %}
                        $('#google-login-userdetails select[name=\'zone_id\']').parent().slideDown();
                    {% endif %}
                },          
                success: function(json) {
                    var html = '<div><strong><span id="postcode-required" class="required">*</span> {{ entry_postcode }}</strong><br /><input type="text" name="postcode" value="" class="large-field" /></div>';
                    
                    var element = $('{{ (enabled.region) ? 'select[name="zone_id"]' : ((enabled.country) ? 'select[name="country_id"]' : 'input[name="country_id"]') }}');
                    
                    {% if (enabled.postcode) %}
                        if ($('input[name="postcode"]').length == 0) $(element).parent().after(html);
                    {% endif %}
                    
                    if (json['postcode_required'] == '1') {
                        {% if (enabled.postcode) %}
                            $('#postcode-required').show(100);
                        {% endif %}
                    } else {
                        {% if (not enabled.postcode) %}
                            $('input[name="postcode"]').parent().slideUp(100).remove();
                        {% else %}
                            $('#postcode-required').hide(100);
                        {% endif %}
                    }
                    
                    html = '<option value="">{{ text_select }}</option>';
                    
                    if (json['zone'] != '' && typeof(json['zone']) != 'undefined') {
                        for (i = 0; i < json['zone'].length; i++) {
                            html += '<option value="' + json['zone'][i]['zone_id'] + '"';
                            
                            if (json['zone'][i]['zone_id'] == '{{ zone_id }}') {
                                html += ' selected="selected"';
                            }
            
                            html += '>' + json['zone'][i]['name'] + '</option>';
                        }
                    } else {
                        html += '<option value="0" selected="selected">{{ text_none }}</option>';
                    }
                    
                    $('#google-login-userdetails select[name=\'zone_id\']').html(html);
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    console.log(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                }
            });
        }
    
        {% if (enabled.country) %}
            $('#google-login-userdetails select[name=\'country_id\']').bind('change', function() {
                triggerZoneField($(this).val());
            });
            triggerZoneField($('#google-login-userdetails select[name=\'country_id\']').val());
        {% else %}
            triggerZoneField($('#google-login-userdetails input[type=\'hidden\'][name=\'country_id\']').val());
        {% endif %}
    });

    $('button[id^=\'button-custom-field\']').on('click', function() {
        var node = this;

        $('#form-upload').remove();

        $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

        $('#form-upload input[name=\'file\']').trigger('click');

        timer = setInterval(function() {
            if ($('#form-upload input[name=\'file\']').val() != '') {
                clearInterval(timer);
                
                $.ajax({
                    url: 'index.php?route=tool/upload',
                    type: 'post',
                    dataType: 'json',
                    data: new FormData($('#form-upload')[0]),
                    cache: false,
                    contentType: false,
                    processData: false,
                    beforeSend: function() {
                        $(node).html('<i class="fa fa-upload"></i> <?= button_uploading ?>');
                        //$(node).button('loading');
                    },
                    complete: function() {
                        $(node).html('<i class="fa fa-upload"></i> <?= button_upload ?>');
                        //$(node).button('reset');
                    },
                    success: function(json) {
                        $(node).parent().find('.text-danger').remove();
                        
                        if (json['error']) {
                            $(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
                        }
        
                        if (json['success']) {
                            alert(json['success']);

                            $(node).parent().find('input').attr('value', json['code']);
                        }
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            }
        }, 500);
    });

  $('select[name=\'country_id\']').trigger('change');
 

    //-->
</script> 
<script type="text/javascript">
  $('.date').datetimepicker({
      pickTime: false
  });

  $('.time').datetimepicker({
      pickDate: false
  });

  $('.datetime').datetimepicker({
      pickDate: true,
      pickTime: true
  });
</script> 
{{ footer }}